# Тетрис

## Описание
Это классическая игра "Тетрис", реализованная на Python с использованием библиотеки Pygame. Игра поддерживает три уровня сложности ("Лёгкий", "Средний", "Сложный"), управление тетромино, подсчет очков и сохранение рекордов в JSON-файл. Приложение работает как на обычных системах, так и в среде Pyodide (Emscripten) с учетом особенностей сохранения данных.

## Возможности
- **Уровни сложности**: Выбор из трёх уровней ("Лёгкий", "Средний", "Сложный") с разной скоростью падения фигур.
- **Управление тетромино**: Перемещение влево/вправо (стрелки), поворот (стрелка вверх), ускоренное падение (стрелка вниз), мгновенное падение (пробел).
- **Подсчет очков**: Очки начисляются за удаление линий (100 очков за линию, умноженные на уровень сложности).
- **Рекорды**: Сохранение и загрузка рекордов для каждого уровня сложности в `high_scores.json` или через строку JSON в коде (для Pyodide).
- **Пауза и выход**: Пауза (клавиша P), выход (клавиша Q), перезапуск после проигрыша (клавиша R).
- **Меню**: Выбор сложности и просмотр рекордов (клавиша H в меню, M для возврата).

## Структура проекта
- `main.py`: Основной файл, содержит:
  - Инициализацию Pygame, настройки окна, цвета и формы тетромино.
  - Класс `Tetromino`: Управляет фигурой (движение, поворот).
  - Класс `GameState`: Логика игры (сетка, коллизии, удаление линий, очки, игра окончена).
  - Класс `Menu`: Отображает меню и рекорды, обрабатывает выбор сложности.
  - Класс `TetrisGame`: Управляет игровым циклом, рендерингом и вводом.
  - Функции для работы с рекордами: экспорт, импорт, сохранение и загрузка из JSON.
- `high_scores.json`: Пример файла с рекордами для каждого уровня сложности.

## Требования
- Python 3.x
- Pygame (установите через `pip install pygame`)
- Поддержка asyncio (включена в Python)
- Для Pyodide: запуск в браузере с соответствующей средой.

## Использование
1. **Запуск игры**: Выполните `main.py` для запуска.
2. **Меню**:
- Используйте стрелки вверх/вниз для выбора уровня сложности.
- Нажмите Enter, чтобы начать игру.
- Нажмите H, чтобы посмотреть рекорды, и M, чтобы вернуться в меню.
3. **Игровой процесс**:
- Управление:
  - Стрелка влево: Двигать фигуру влево.
  - Стрелка вправо: Двигать фигуру вправо.
  - Стрелка вниз: Ускорить падение.
  - Стрелка вверх: Повернуть фигуру.
  - Пробел: Мгновенно сбросить фигуру вниз.
- Нажмите P для паузы/возобновления.
- Нажмите Q для выхода (сохраняет рекорды).
4. **Игра окончена**:
- При заполнении сетки игра заканчивается.
- Рекорд обновляется, если текущий счёт выше.
- Нажмите R для возврата в меню.
5. **Рекорды**:
- Сохраняются в `high_scores.json` (на обычных системах).
- Для Pyodide: скопируйте строку JSON из консоли и вставьте в `HIGH_SCORES_JSON` в коде.

## Примечания
- **Сетка**: Игровое поле 10x20 клеток, размер окна 300x600 пикселей.
- **Очки**: За каждую удалённую линию начисляется 100 очков, умноженных на уровень сложности (1, 2 или 3).
- **Сохранение**: На обычных системах рекорды хранятся в `high_scores.json`. В Pyodide выводится строка JSON для ручного обновления.
- **Цвета**: Каждая форма тетромино имеет уникальный цвет (I — циан, J — синий, L — красный, O — жёлтый, S — зелёный, Z — пурпурный, T — оранжевый).

## Пример данных
- Файл `high_scores.json` содержит начальные рекорды:
- Лёгкий: 900
- Средний: 0
- Сложный: 0
- В коде есть строка `HIGH_SCORES_JSON` для Pyodide с примерами рекордов.
