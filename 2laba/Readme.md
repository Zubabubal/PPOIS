# Система управления данными питомцев

## Описание
Это настольное приложение на Python для управления данными о питомцах, построенное с использованием библиотеки Tkinter для интерфейса, SQLite для хранения данных и XML для импорта/экспорта. Приложение следует архитектуре MVC (Model-View-Controller) для организации кода и функциональности. Позволяет добавлять, искать, удалять и просматривать записи о питомцах, а также сохранять и загружать данные в/из XML-файлов.

## Возможности
- **Добавление питомцев**: Ввод данных о питомце (имя, дата рождения, дата последнего визита, ФИО ветеринара, диагноз) и добавление в базу данных.
- **Поиск питомцев**: Поиск по имени и дате рождения, дате последнего визита и ФИО ветеринара или по фразе в диагнозе.
- **Удаление питомцев**: Удаление записей по имени и дате рождения, дате последнего визита и ФИО ветеринара или по фразе в диагнозе.
- **Просмотр записей**: Отображение данных в табличном или древовидном виде с поддержкой пагинации.
- **Импорт/экспорт XML**: Сохранение записей в XML-файл и загрузка данных из XML.
- **Удаление дубликатов**: Автоматическое удаление повторяющихся записей из базы данных.

## Структура проекта
- `main.py`: Точка входа приложения, инициализирует контроллер и запускает цикл событий Tkinter.
- `model.py`: Отвечает за операции с базой данных (SQLite) и обработку XML:
  - Класс `Pet`: Представляет питомца с атрибутами (имя, дата рождения и т.д.).
  - Класс `DatabaseModel`: Управляет созданием базы SQLite, операциями CRUD и экспортом в XML.
  - `PetSAXHandler` и `load_from_xml`: Обрабатывают парсинг и импорт данных из XML.
- `controller.py`: Связывает модель и представление, обрабатывает действия пользователя и обновляет интерфейс.
- `view.py`: Определяет графический интерфейс с помощью Tkinter:
  - `MainView`: Основное окно с меню, панелью инструментов, таблицей/деревом и пагинацией.
  - `AddDialog`, `SearchDialog`, `DeleteDialog`: Модальные диалоги для добавления, поиска и удаления питомцев.
- `pets.xml`, `pets_2025-05-21_22-59-17.xml`: Примеры XML-файлов с данными питомцев для тестирования.

## Требования
- Python 3.x
- Tkinter (обычно включен в Python)
- SQLite3 (включен в Python)
- Дополнительные библиотеки не требуются.

## Использование
1. **Запуск приложения**: Выполните `main.py` для запуска интерфейса.
2. **Добавление питомца**:
- Нажмите "Добавить питомца" в меню или на панели инструментов.
- Заполните поля (имя, дата рождения, дата последнего визита, ФИО ветеринара, диагноз).
- Даты вводите в формате `ГГГГ-ММ-ДД` (например, 2020-05-01).
- Нажмите "Добавить" для сохранения.
3. **Поиск питомцев**:
- Нажмите "Поиск" для открытия диалога поиска.
- Выберите метод поиска:
  - По имени и дате рождения.
  - По дате последнего визита и ФИО ветеринара.
  - По фразе в диагнозе.
- Результаты отобразятся в таблице ниже полей поиска.
4. **Удаление питомцев**:
- Нажмите "Удалить" для открытия диалога удаления.
- Введите критерии удаления (аналогично поиску).
- Подтвердите удаление соответствующих записей.
5. **Просмотр записей**:
- Переключайтесь между "Табличный вид" и "Древовидный вид" через меню "Вид".
- Используйте кнопки пагинации (Первая, Предыдущая, Следующая, Последняя) для навигации.
- Настройте размер страницы в соответствующем поле.
6. **Импорт/экспорт**:
- Сохранение в XML: Нажмите "Сохранить в XML" для экспорта всех записей в файл с меткой времени.
- Загрузка из XML: Нажмите "Загрузить из XML" для импорта данных из выбранного файла.
7. **Обновление**: Нажмите "Обновить" для перезагрузки текущего вида.

## Примечания
- **База данных**: Приложение создает файл `pets.db` (SQLite) в рабочей директории для хранения записей.
- **Валидация дат**: Даты рождения и последнего визита проверяются (диапазон: 2000-01-01 — 2025-05-05), дата визита должна быть позже даты рождения.
- **Обработка ошибок**: Ошибки (например, неверный формат даты, проблемы с базой) отображаются в диалоговых окнах.
- **Дубликаты**: Приложение проверяет и удаляет дублирующиеся записи по всем полям.

## Пример данных
- Включены два XML-файла (`pets.xml` и `pets_2025-05-21_22-59-17.xml`) для тестирования.
- Загрузите эти файлы, чтобы заполнить базу данных примерами.

## Ограничения
- Интерфейс использует русские названия для кнопок, меню и диалогов.
- Импорт/экспорт XML зависит от файловой системы; убедитесь в наличии прав доступа.
- Нет продвинутой фильтрации или сортировки в таблице/дереве, кроме опций поиска.
