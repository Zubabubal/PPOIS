text

Копировать
# Веб-приложение "Банкомат"

## Описание
Это веб-приложение, имитирующее работу банкомата, построенное на Python с использованием Flask. Оно позволяет выбирать банк, вводить данные карты, проверять PIN-код, выполнять операции с аккаунтом (проверка баланса, снятие, пополнение, перевод денег) и получать чеки. Данные карты, PIN и баланс загружаются из текстовых файлов.

## Возможности
- **Выбор банка**: Поддержка трёх банков: Belarusbank, Priorbank, Alfabank.
- **Вставка карты**: Ввод номера карты (1-5) для загрузки данных из файлов.
- **Проверка PIN**: Ввод PIN-кода с ограничением в 3 попытки.
- **Операции с аккаунтом**:
  - Проверка баланса с генерацией чека.
  - Снятие наличных (с учётом доступных средств в банкомате и на счёте).
  - Пополнение счёта через банкомат.
  - Перевод денег на другой счёт.
- **Чеки**: Отображение чека после каждой операции.
- **Выход**: Сброс сессии и возврат к выбору банка.

## Структура проекта
- `web_app.py`: Основной файл Flask-приложения:
  - Инициализация Flask, маршруты для обработки запросов.
  - Управление сессией (выбор банка, загрузка карты, проверка PIN, операции).
  - Классы: `Bank`, `ATM`, `Card`, `Account`, `PIN`, `Cash`, `Check` (предполагаются в модуле `bank_system`).
- HTML-шаблоны:
  - `index.html`: Страница выбора банка (1-3: Belarusbank, Priorbank, Alfabank).
  - `insert_card.html`: Ввод номера карты (1-5).
  - `enter_pin.html`: Ввод PIN-кода.
  - `operations.html`: Интерфейс для операций (баланс, снятие, пополнение, перевод, выход).
  - `check.html`: Отображение чека после операций.
- Текстовые файлы (не включены, но ожидаются):
  - `{number}data.txt`: Данные карты (например, `1data.txt` для карты 1).
  - `{number}pin.txt`: PIN-код карты.
  - `{number}money.txt`: Баланс счёта.
  - `{atm_number}atm.txt`: Доступные средства в банкомате.

## Требования
- Python 3.x
- Flask (установите через `pip install flask`)
- Модуль `bank_system` с классами `Bank`, `ATM`, `Card`, `Account`, `PIN`, `Cash`, `Check` (не предоставлен, предполагается наличие).
- Текстовые файлы для карт, PIN, баланса и банкомата.

- ## Использование
1. **Запуск**: Выполните `web_app.py`, откройте браузер и перейдите на `http://127.0.0.1:5000/`.
2. **Выбор банка**:
- На главной странице выберите банк (1 для Belarusbank, 2 для Priorbank, 3 для Alfabank).
- Нажмите "Submit" для продолжения.
3. **Вставка карты**:
- Введите номер карты (1-5) на странице "Insert Card".
- Нажмите "Insert Card" для загрузки данных.
4. **Ввод PIN**:
- Введите PIN-код карты на странице "Enter PIN".
- У вас 3 попытки; при неудаче сессия сбрасывается.
5. **Операции**:
- **Проверка баланса**: Нажмите "Check Balance" для просмотра чека с текущим балансом.
- **Снятие средств**: Введите сумму, нажмите "Withdraw" (проверяется доступность в банкомате и на счёте).
- **Пополнение счёта**: Введите сумму, нажмите "Add Money" для пополнения.
- **Перевод денег**: Введите номер целевого счёта и сумму, нажмите "Send Money".
- После каждой операции отображается чек.
6. **Выход**: Нажмите "Exit" для сброса сессии и возврата к начальной странице.

## Примечания
- **Сессия**: Данные хранятся в словаре `session_state` (банк, банкомат, карта, счёт, PIN, чек).
- **Безопасность**: Секретный ключ (`app.secret_key`) нужен для flash-сообщений; замените `"your-secret-key"` на уникальное значение.
- **Файлы**: Приложение ожидает текстовые файлы для карт, PIN и баланса в корневой директории.
- **Валидация**: Проверяются вводимые данные (целые числа для PIN, числа для сумм, положительные значения для переводов).
- **Чеки**: Генерируются для всех операций с указанием типа, суммы, номера счёта, банкомата и банка.
